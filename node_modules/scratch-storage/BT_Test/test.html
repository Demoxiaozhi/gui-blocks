<!DOCTYPE HTML>
<html>
  <body>
  <script src="../dist/web/scratch-storage.js"></script>
  <script>
      /**
       * @param {Asset} asset - calculate a URL for this asset.
       * @returns {string} a URL to download a project file.
       */
      const getProjectUrl = function (asset) {
          const assetIdParts = asset.assetId.split('.');
          const assetUrlParts = ['https://cdn.projects.scratch.mit.edu/', 'internalapi/project/', assetIdParts[0], '/get/'];
          if (assetIdParts[1]) {
              assetUrlParts.push(assetIdParts[1]);
          }
          return assetUrlParts.join('');
      };

      /**
       * @param {Asset} asset - calculate a URL for this asset.
       * @returns {string} a URL to download a project asset (PNG, WAV, etc.)
       */
      var getAssetUrl = function (asset) {
          var assetUrlParts = [
              'https://cdn.assets.scratch.mit.edu/',
              asset.assetId,
              '.',
              asset.dataFormat,
              '/get/'
          ];
          return assetUrlParts.join('');
      };

      const storage = new Scratch.Storage();
      const AssetType = storage.AssetType;

      // add web sources
      storage.addWebSource([AssetType.Project], getProjectUrl);
      storage.addWebSource([AssetType.ImageVector, AssetType.ImageBitmap, AssetType.Sound], getAssetUrl);

      // continue to "Storage API Quick Start" section below
      var assetInfo = { type: storage.AssetType.Project, id: '119615668'}
      storage.load(assetInfo.type, assetInfo.id).then(function(asset) {
        console.log(asset);
        console.log(asset.decodeText());
      });
  </script>
  <body>
<html>
