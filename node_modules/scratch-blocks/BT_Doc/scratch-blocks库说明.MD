# 参考
blockly官网: https://developers.google.com/blockly/

# Inject Blockly
## Fixed-sized Workspace
完整代码: BT_Test/Fixedsized_workspace.html
要使用Blockly, 一般是将其嵌入网页, 使用Blockly.inject将blockly workspace嵌入到网页中,一般是嵌入一个div中.
使用固定大小的div, 如下:
<div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
然后, 嵌入如下:
workspace = Blockly.inject('blocklyDiv',
{
  toolbox: document.getElementById('toolbox'),
  media: '../media/',
});
说明: media中保存blockly访问媒体素材的路径, 比如模块上的小图片等.
toolbox选项是最重要的选项, 该选项定义了哪些模块在工具箱中显示, 如何分组和是否有分类等信息, 它可以是一个xml节点(getElementById), 也可以是xml字符串, 如下为示例:
<xml id="toolbox" style="display: none">
  <block type="control_forever"></block>
</xml>
这样, 在工具箱只会显示重复执行这个模块.

## Resizable Workspace
完整代码: BT_Test/Resizable_workspace.html
作为一个好的web应用, 一般会缩放Blockly, 用于填充屏幕上可用的空间. 有几种方式完成: 使用iframe, 使用CSS, 使用Javascript定位等.
比如使用javascript定位的步骤是: 1. 定义区域 2. Injection注入 3. 定位
1. 使用div或table定义一个空白区域, 该区域随着页面resize和变化, 假设其id为blocklyArea.
比如: 使用百分比定义blocklyArea的大小
2. 使用Blockly.inject注入workspace, 使用一个空白的blocklyDiv来注入, 此时, Blockly可能在屏幕上(也可能不在), 但是位置不一定正确
3. 使用绝对定位调整blocklyDiv的位置
<div id="blocklyDiv" style="position: absolute"></div>
添加onresize事件, 在事件处理函数中, 将blocklyDiv定位到blockyArea中
说明: 灵活使用css和javascript, 可以实现任意缩放的workspace.

# 增加自定义模块
添加一个自定义模块, 一般需要如下内容:
模块定义对象: 定义模块的外观和行为, 包括文本, 颜色, 参数, 连接等.
工具箱引用: 在toolbox的xml文件中引用模块的类型, 从而用户可以拖拽模块到workspace
generator函数: 模块对应的代码字符串.
block定义可以使用json或javascript方式, 在scratch blocks中, 模块使用json方式定义. 参考: blocks_vertical/control.js
在定义模块之后, 使用模块的名称在toolbox中引用, 即可加入到工具箱中, 工具箱参考: blocks_vertical/default_toolbox.js
如果需要生成代码, 添加对应的代码.

# toolbox
使用XML定义toolbox, 如果定义了category, 那么就会进行分类.
完整代码: BT_Test/toolbox.html
使用colour和secondaryColour定义颜色, colour定义了圆点的颜色, secondaryColour定义边框颜色.

