# 介绍
scratch-storage库主要用于加载和存储scratch3.0的工程和相关的asset文件.

# 使用说明
npm install
npm run build ->　生成发布文件dist文件夹

# 主要接口
const storage = new Scratch.Storage();
storage.addWebSource([AssetType.Project], getProjectUrl);
storage.load(assetInfo.type, assetInfo.id).then(function(asset) {
  console.log(asset);
  console.log(asset.decodeText());
});
scratch-storage实现了三个方式加载资源，BuiltinHelper.js使用内置资源文件（直接嵌入到页面中），LocalHelper.js使用本地存储（浏览器的本地存储功能）和WebHelper.js使用在线资源．
scratch-storage默认会依次从三个helper尝试获取，有一个提供了资源就不用尝试下一个．其中web helper需要配置资源的获取方式，其使用get方式从指定的服务器获取资源，如：
https://cdn.projects.scratch.mit.edu/internalapi/project/119615668/get/

# 参考示例
<!DOCTYPE HTML>
<html>
  <body>
  <script src="../dist/web/scratch-storage.js"></script>
  <script>
      /**
       * @param {Asset} asset - calculate a URL for this asset.
       * @returns {string} a URL to download a project file.
       */
      const getProjectUrl = function (asset) {
          const assetIdParts = asset.assetId.split('.');
          const assetUrlParts = ['https://cdn.projects.scratch.mit.edu/', 'internalapi/project/', assetIdParts[0], '/get/'];
          if (assetIdParts[1]) {
              assetUrlParts.push(assetIdParts[1]);
          }
          return assetUrlParts.join('');
      };

      /**
       * @param {Asset} asset - calculate a URL for this asset.
       * @returns {string} a URL to download a project asset (PNG, WAV, etc.)
       */
      var getAssetUrl = function (asset) {
          var assetUrlParts = [
              'https://cdn.assets.scratch.mit.edu/',
              asset.assetId,
              '.',
              asset.dataFormat,
              '/get/'
          ];
          return assetUrlParts.join('');
      };

      const storage = new Scratch.Storage();
      const AssetType = storage.AssetType;

      // add web sources
      storage.addWebSource([AssetType.Project], getProjectUrl);
      storage.addWebSource([AssetType.ImageVector, AssetType.ImageBitmap, AssetType.Sound], getAssetUrl);

      // continue to "Storage API Quick Start" section below
      var assetInfo = { type: storage.AssetType.Project, id: '119615668'}
      storage.load(assetInfo.type, assetInfo.id).then(function(asset) {
        console.log(asset);
        console.log(asset.decodeText());
      });
  </script>
  <body>
<html>
